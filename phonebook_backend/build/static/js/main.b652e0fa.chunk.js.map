{"version":3,"sources":["components/Person.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Notification.js","components/App.js","index.js"],"names":["Person","person","handleDelete","name","number","onClick","id","Filter","filterValue","filterOnChange","value","onChange","PersonForm","filterOnSubmit","filterValue2","filterOnChange2","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","messageErr","messageOk","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","showAll","nameFilter","setNewFilter","errorMessage","setErrorMessage","okMessage","setOkMessage","useEffect","phonebookService","initialPersons","namesToShow","filter","item","toLowerCase","includes","window","confirm","setTimeout","catch","error","event","target","preventDefault","personObject","map","filteredId","filtered","JSON","stringify","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b652e0fa.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({ person, handleDelete }) => {\r\n  return (\r\n    <>{person.name} {person.number}\r\n      <button onClick={() => handleDelete(person.id, person.name)} >\r\n        delete\r\n      </button>\r\n      <br />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\n\r\nconst Filter = ({ filterValue, filterOnChange }) => {\r\n    return (\r\n      <>filter shown with: <input value={filterValue} onChange={filterOnChange} /><br /></>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ filterOnSubmit, filterValue, filterValue2, filterOnChange, filterOnChange2 }) => {\r\n    return (\r\n      <form onSubmit={filterOnSubmit}>\r\n        <div>\r\n          name: <input value={filterValue} onChange={filterOnChange} /><br />\r\n          number: <input value={filterValue2} onChange={filterOnChange2} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst delPerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, delPerson, update }","import React from 'react'\r\n\r\nconst Notification = ({ messageErr, messageOk }) => {\r\n  if (messageErr === null && messageOk === null) {\r\n    return null\r\n  }\r\n\r\n  if (messageOk !== null) {\r\n    return (\r\n        <div className=\"ok\">\r\n            {messageOk}\r\n        </div>\r\n    )\r\n  }\r\n\r\n  if (messageErr !== null) {\r\n    return (\r\n        <div className=\"error\">\r\n            {messageErr}\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Notification\r\n","import React, { useState, useEffect } from 'react'\r\nimport Person from './Person'\r\nimport Filter from './Filter'\r\nimport PersonForm from './PersonForm'\r\nimport phonebookService from '../services/persons'\r\nimport Notification from './Notification'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ showAll ] = useState(false)\r\n  const [ nameFilter, setNewFilter ] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [okMessage, setOkMessage] = useState(null)\r\n\r\n  const hook = () => {\r\n    phonebookService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }\r\n  useEffect(hook, [])\r\n\r\n  const namesToShow = showAll\r\n    ? persons\r\n    : persons.filter(item => item.name.toLowerCase().includes(nameFilter.toLowerCase()))\r\n  \r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n  \r\n    if (persons.map(item => item.name).includes(newName)){\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\r\n        const filteredId = persons.filter(item => item.name == newName).map(filtered => filtered.id)\r\n        phonebookService\r\n          .update(filteredId, personObject)\r\n          .then(() => {\r\n            phonebookService\r\n              .getAll()\r\n              .then(initialPersons => {\r\n                setPersons(initialPersons)\r\n              })\r\n              setOkMessage(\r\n                `Person '${newName}' new number updated`\r\n              )\r\n              setTimeout(() => {\r\n                setOkMessage(null)\r\n              }, 5000)\r\n          })\r\n          .catch(error => {\r\n            setErrorMessage(\r\n              //`Person '${newName}' was already removed from server`\r\n              `${JSON.stringify(error.response.data)}`\r\n            )\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n            phonebookService //render updated phonebook after error\r\n              .getAll()\r\n              .then(initialPersons => {\r\n                setPersons(initialPersons)\r\n              })\r\n          })\r\n      }\r\n    }\r\n    else{\r\n      phonebookService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setOkMessage(\r\n            `Added '${newName}'`\r\n          )\r\n          setTimeout(() => {\r\n            setOkMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(\r\n            `${JSON.stringify(error.response.data)}`\r\n          )\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n        /* FIXME: it is possible to create multible items with the same name \r\n        using different browsers at the same time and it cause problems\r\n        if trying to update number for that name. Deleting is still possible\r\n        because id is unique. So, it would need some check before add... */\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const handleDelete = (id, name) => {\r\n    if (window.confirm(`Delete ${name}?`)) {\r\n      phonebookService\r\n        .delPerson(id)\r\n        .then(() => {\r\n          setPersons(persons.filter(item => item.id !== id))\r\n          setOkMessage(\r\n            `'${name}' removed from server`\r\n          )\r\n          setTimeout(() => {\r\n            setOkMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(\r\n            `Person '${name}' was already removed from server`\r\n          )\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n          phonebookService //render updated phonebook after error\r\n            .getAll()\r\n            .then(initialPersons => {\r\n              setPersons(initialPersons)\r\n            })\r\n        })\r\n    }\r\n  }\r\n\r\n  const handlePersonChangeName = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handlePersonChangeNr = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handlePersonChangeFilter = (event) => {\r\n    setNewFilter(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <Notification messageErr={errorMessage} messageOk={okMessage} />\r\n      <Filter filterValue={nameFilter} filterOnChange={handlePersonChangeFilter} />\r\n      <h2>add a new</h2>\r\n      <PersonForm filterOnSubmit={addPerson} filterValue={newName} filterOnChange={handlePersonChangeName} filterValue2={newNumber} filterOnChange2={handlePersonChangeNr} />\r\n      <h2>Numbers</h2>\r\n      <div>\r\n        {namesToShow.map(person => \r\n          <Person key={person.id} person={person} handleDelete={handleDelete} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React, { useState } from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}